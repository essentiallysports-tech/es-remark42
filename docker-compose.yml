version: "2"

services:
  remark:
    # remove the next line in case you want to use this docker-compose separately
    # as otherwise it would complain for absence of Dockerfile
    build: .
    image: badolamgk/es-remark42:latest
    container_name: "remark42"
    hostname: "remark42"
    restart: always

    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "5"

    # uncomment to expose directly (no proxy)
    ports:
      - "8080:8080"
    #  - "443:8443"

    environment:
      - REMARK_URL=https://remark42.essentiallysports.com
      - SITE=essentiallysports
      - AUTH_SAME_SITE=none
      - SECRET=admin
      - AUTH_ANON=true
      - STORE_BOLT_PATH=/srv/var/db
      - BACKUP_PATH=/srv/var/backup
      - AUTH_GOOGLE_CID= # your Google CID
      - AUTH_GOOGLE_CSEC= # your Google CSEC
      # Enable it only for the initial comment import or for manual backups.
      # Do not leave the server running with the ADMIN_PASSWD set if you don't have an intention
      # to keep creating backups manually!
      - ADMIN_PASSWD=admin
      - ANON_VOTE=true
      - VOTES_IP=true
      - READONLY_AGE
      - ADMIN_SHARED_ID= # your admin shared IDs
    volumes:
      - ./var:/srv/var
